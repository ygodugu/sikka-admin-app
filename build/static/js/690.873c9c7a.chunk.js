"use strict";(self.webpackChunksikka_admin_app=self.webpackChunksikka_admin_app||[]).push([[690],{2806:function(e,n,a){a.d(n,{b:function(){return s}});var s=a(1243).Z.create({baseURL:"https://app.cikka.com.au/api"});s.interceptors.request.use((function(e){var n=localStorage.getItem("token");return n&&(e.headers.Authorization="Bearer "+n),e}),(function(e){return Promise.reject(e)})),s.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))},7883:function(e,n,a){a.d(n,{$:function(){return i}});var s=a(3637),t=a(184),i=function(e){var n=e.page,a=e.pageSize,i=e.data,r=e.setPage;return(0,t.jsxs)("div",{className:"row pagin-sec",children:[(0,t.jsx)("div",{className:"col-sm-12 col-md-5",children:(0,t.jsx)("div",{className:"dataTables_info",role:"status","aria-live":"polite",children:"Showing ".concat(n*a+1," to  ").concat(n*a+i.data.length," of ").concat(i.count," entries")})}),(0,t.jsx)("div",{className:"col-sm-12 col-md-7",style:{display:"flex",justifyContent:"flex-end"},children:(0,t.jsx)(s.Z,{itemClass:"page-item",prevPageText:"Previous",nextPageText:"Next",linkClass:"page-link",activePage:n+1,itemsCountPerPage:a,totalItemsCount:i.count,pageRangeDisplayed:5,hideFirstLastPages:!0,onChange:function(e){return r(e-1)}})})]})}},1629:function(e,n,a){a.d(n,{o:function(){return t}});var s=a(184),t=function(e){var n=e.dateTime,a=new Date(n).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return(0,s.jsx)("span",{children:a})}},2805:function(e,n,a){a.d(n,{d:function(){return i}});a(2791);var s=a.p+"static/media/edit-icon.99f293607452e6df8a5fe12a6b47b2b0.svg",t=a(184),i=function(e){var n=e.onClick;return(0,t.jsx)("img",{style:{cursor:"pointer"},src:s,onClick:n})}},9324:function(e,n,a){a.d(n,{q:function(){return t}});var s=a(184),t=function(e){return null===e.code?(0,s.jsx)("span",{className:"badge badge-pill badge-warning",children:"Null"}):0===e.code?(0,s.jsx)("span",{className:"badge badge-pill badge-danger",children:"Deleted"}):1===e.code?(0,s.jsx)("span",{className:"badge badge-pill badge-success",children:"Active"}):2===e.code?(0,s.jsx)("span",{className:"badge badge-pill badge-warning",children:"Hold"}):void 0}},690:function(e,n,a){a.r(n),a.d(n,{MerchantServices:function(){return w}});var s=a(9439),t=a(2791),i=a(9781),r=a(6403),c=a(2917),l=a(7689),d=a(4849),o=a(2806),u=a(1087),h=(a(7883),a(1629)),m=a(2805),x=a(9324),j=a(3418),f=a(9930),p=a(5705),v=a(8007),g=(a(8862),a(184)),b=(0,v.Ry)({name:(0,v.Z_)().required("Name is required")}),N=function(e){var n=e.initialValues,a=e.handleSubmit,s=(e.isAdd,(0,p.TA)({initialValues:n,onSubmit:a,validationSchema:b}));return(0,g.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("aside",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"name",children:"Name *"}),(0,g.jsx)("input",{type:"text",id:"name",value:s.values.name,onChange:s.handleChange,className:"form-control form-control-lg",placeholder:"Enter name"}),(0,g.jsx)("div",{className:"invalid-feedback",children:s.errors.name})]})}),(0,g.jsx)("aside",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"description",children:"Description"}),(0,g.jsx)("input",{type:"text",id:"description",value:s.values.description,onChange:s.handleChange,className:"form-control form-control-lg",placeholder:"Enter description"})]})}),(0,g.jsx)("aside",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"duration",children:"Duration"}),(0,g.jsx)("input",{type:"number",id:"duration",value:s.values.duration,onChange:s.handleChange,className:"form-control form-control-lg",placeholder:"Enter duration"})]})}),(0,g.jsx)("aside",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"form-group",children:[(0,g.jsx)("label",{htmlFor:"status",children:"status"}),(0,g.jsxs)("select",{id:"status",className:"form-control select2",onChange:s.handleChange,value:s.values.status,children:[(0,g.jsx)("option",{value:"1",children:"Active"}),(0,g.jsx)("option",{value:"2",children:"Hold"}),(0,g.jsx)("option",{value:"0",children:"Deleted"})]})]})})]}),(0,g.jsx)("div",{className:"modal-footer d-flex justify-content-end",children:(0,g.jsx)("button",{type:"submit",className:"btn mb-2 btn-primary",children:"Save"})})]})},S=function(e){return o.b.post("/services",e)},y=function(e){var n=e.handleSuccess,a=e.handleClose,s=e.merchantUserId;console.log(s);var t=(0,j.D)({mutationFn:S}),i={fileId:"b2a68eb4-70ea-4b3e-8404-6f003a0dcf17",id:"",merchantUserId:s,name:"",duration:"",description:"",status:""};return(0,g.jsxs)(f.Z,{show:!0,onHide:a,size:"lg",children:[(0,g.jsxs)(f.Z.Header,{closeButton:!1,children:[(0,g.jsx)(f.Z.Title,{children:"New Service"}),(0,g.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:a,children:(0,g.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,g.jsx)(f.Z.Body,{children:(0,g.jsx)(N,{initialValues:i,handleSubmit:function(e){t.mutate(e,{onSuccess:n})}})})]})},C=a(1413),k=function(e){return o.b.put("/services/".concat(e.id),e)},Z=function(e){var n=e.handleSuccess,a=e.handleClose,s=e.id,t=(0,c.a)({queryKey:["MerchantServices-details",s],queryFn:function(){return function(e){return o.b.get("/services/".concat(e)).then((function(e){return e.data}))}(s)}}),i=t.data,r=(t.error,(0,j.D)({mutationFn:k}));return(0,g.jsx)(g.Fragment,{children:i&&(0,g.jsxs)(f.Z,{show:!0,onHide:a,size:"lg",children:[(0,g.jsxs)(f.Z.Header,{closeButton:!1,children:[(0,g.jsx)(f.Z.Title,{children:"Edit Merchant-Service"}),(0,g.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:a,children:(0,g.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,g.jsx)(f.Z.Body,{children:(0,g.jsx)(N,{initialValues:i,handleSubmit:function(e){r.mutate((0,C.Z)((0,C.Z)({},e),{},{id:s}),{onSuccess:n})}})})]})})},w=function(){var e,n=(0,l.UO)().userId;console.log(n);var a=(0,r.NL)(),j=(0,t.useState)(0),f=(0,s.Z)(j,2),p=(f[0],f[1],(0,t.useState)(!1)),v=(0,s.Z)(p,2),b=v[0],N=v[1],S=(0,t.useState)(!1),C=(0,s.Z)(S,2),k=C[0],w=C[1],A=(0,t.useState)(),U=(0,s.Z)(A,2),P=U[0],q=U[1],I=(0,t.useState)(""),B=(0,s.Z)(I,2),D=(B[0],B[1]),F=(0,t.useState)(""),L=(0,s.Z)(F,2),T=(L[0],L[1],(0,t.useState)("")),M=(0,s.Z)(T,2),E=(M[0],M[1],(0,t.useState)("")),H=(0,s.Z)(E,2),_=(H[0],H[1],(0,t.useState)(!1)),z=(0,s.Z)(_,2),O=(z[0],z[1],(0,c.a)({queryKey:["merchantServices",n],queryFn:function(){return function(e){return o.b.get("/services/merchant-user-id?merchantUserId=".concat(e)).then((function(e){return e.data}))}(n)},keepPreviousData:!0})),V=O.data,K=O.refetch,R=O.isLoading,G=(0,t.useState)([]),Q=(0,s.Z)(G,2),$=Q[0],J=Q[1];(0,t.useEffect)((function(){o.b.get("/users").then((function(e){return e.data})).then((function(e){J(e),console.log(e)})).catch((function(e){console.error("Error fetching categories:",e)}))}),[]);var W=function(e,n){var a=e.split("?")[1].split("=")[1];return"https://app.cikka.com.au/api/files/file-preview?fileName=".concat(a,"&folderName=").concat(n)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"row justify-content-center",children:[(0,g.jsx)("aside",{className:"col-md-12 mt-3 mb-3",children:(0,g.jsx)(u.OL,{to:"/Merchants",children:(0,g.jsx)("i",{className:"fe fe-arrow-left-circle fe-24"})})}),(0,g.jsxs)("div",{className:"col-12",children:[(0,g.jsxs)("div",{className:"row heading-add",children:[(0,g.jsx)("aside",{className:"ml-2 mr-2",children:(0,g.jsx)("h2",{className:"mb-0 page-title",children:"Merchant Services"})}),(0,g.jsx)("form",{className:"form-inline mr-auto searchform",children:(0,g.jsx)("input",{className:"form-control mr-sm-2 border-0",onChange:function(e){var n=e.target.value;D(n),K()},type:"text",style:{background:"white"},placeholder:"Search","aria-label":"Search"})}),(0,g.jsx)("aside",{className:"col-sm-2 add-sec",children:(0,g.jsx)("button",{className:"bttn",onClick:function(){return N(!0)},children:"Add"})})]}),(0,g.jsx)("div",{className:"row my-2",children:(0,g.jsx)("div",{className:"col-md-12",children:(0,g.jsx)("div",{className:"card shadow",children:(0,g.jsx)("div",{className:"card-body",children:(0,g.jsx)("div",{className:"resp-table services-tb",children:(0,g.jsxs)("table",{className:"table",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"Actions"}),(0,g.jsx)("th",{children:"Status"}),(0,g.jsx)("th",{children:"Image"}),(0,g.jsx)("th",{children:"ID"}),(0,g.jsx)("th",{children:"Merchant-UserId"}),(0,g.jsx)("th",{children:"Name"}),(0,g.jsx)("th",{children:"duration"}),(0,g.jsx)("th",{children:"Description"}),(0,g.jsx)("th",{children:"CreatedBy"}),(0,g.jsx)("th",{children:"UpdatedBy"}),(0,g.jsx)("th",{children:"CreatedAt"}),(0,g.jsx)("th",{children:"UpdatedAt"})]})}),(0,g.jsx)("tbody",{children:R?(0,g.jsx)("tr",{children:(0,g.jsx)("td",{rowSpan:"10",colSpan:"15",children:(0,g.jsx)("div",{className:"text-center py-5",children:(0,g.jsx)(d.Z,{animation:"border"})})})}):null===V||void 0===V||null===(e=V.services)||void 0===e?void 0:e.map((function(e){var a,s,t,r,c;return(0,g.jsxs)("tr",{children:[(0,g.jsxs)("td",{className:"actions",children:[(0,g.jsx)(m.d,{onClick:(c=e.id,function(){q(c),w(!0)})}),(0,g.jsx)(u.OL,{to:"/MerchantServiceAppointmentBlocking/".concat(e.id,"/").concat(n),children:(0,g.jsx)("i",{className:"fe fe-x fe-16 icon"})}),(0,g.jsx)(u.OL,{to:"/MerchantServiceAppointment/".concat(e.id),children:(0,g.jsx)("i",{className:"fe fe-disc fe-16 icon"})})]}),(0,g.jsx)("td",{children:(0,g.jsx)(x.q,{code:e.status})}),(0,g.jsx)("td",{children:e.fileUpload&&e.fileUpload.filePath?(0,g.jsx)("img",{src:W(e.fileUpload.filePath,e.fileUpload.folderName),alt:"logo",className:"square-logo"}):(0,g.jsx)("img",{src:i,alt:"demoLogo",className:"square-logo"})}),(0,g.jsx)("td",{children:e.id}),(0,g.jsx)("td",{children:e.merchantUserId}),(0,g.jsx)("td",{children:e.name}),(0,g.jsx)("td",{children:e.duration}),(0,g.jsx)("td",{children:e.description}),(0,g.jsx)("td",{children:(null===$||void 0===$||null===(a=$.data)||void 0===a||null===(s=a.find((function(n){return n.id===e.createdBy})))||void 0===s?void 0:s.firstName)||"N/A"}),(0,g.jsx)("td",{children:(null===$||void 0===$||null===(t=$.data)||void 0===t||null===(r=t.find((function(n){return n.id===e.updatedBy})))||void 0===r?void 0:r.firstName)||"N/A"}),(0,g.jsx)("td",{children:(0,g.jsx)(h.o,{dateTime:e.createdAt})}),(0,g.jsx)("td",{children:(0,g.jsx)(h.o,{dateTime:e.updatedAt})})]},e.id)}))})]})})})})})})]})]}),b?(0,g.jsx)(y,{handleSuccess:function(){N(!1),K()},handleClose:function(){return N(!1)},merchantUserId:n}):null,k?(0,g.jsx)(Z,{handleSuccess:function(){a.invalidateQueries({queryKey:["merchantServices-details",P]}),w(!1),K()},id:P,handleClose:function(){return w(!1)}}):null]})}}}]);
//# sourceMappingURL=690.873c9c7a.chunk.js.map