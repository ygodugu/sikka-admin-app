"use strict";(self.webpackChunksikka_admin_app=self.webpackChunksikka_admin_app||[]).push([[973],{2806:function(e,a,n){n.d(a,{b:function(){return t}});var t=n(1243).Z.create({baseURL:"https://app.cikka.com.au/api"});t.interceptors.request.use((function(e){var a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer "+a),e}),(function(e){return Promise.reject(e)})),t.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))},7883:function(e,a,n){n.d(a,{$:function(){return r}});var t=n(3637),s=n(184),r=function(e){var a=e.page,n=e.pageSize,r=e.data,i=e.setPage;return(0,s.jsxs)("div",{className:"row pagin-sec",children:[(0,s.jsx)("div",{className:"col-sm-12 col-md-5",children:(0,s.jsx)("div",{className:"dataTables_info",role:"status","aria-live":"polite",children:"Showing ".concat(a*n+1," to  ").concat(a*n+r.data.length," of ").concat(r.count," entries")})}),(0,s.jsx)("div",{className:"col-sm-12 col-md-7",style:{display:"flex",justifyContent:"flex-end"},children:(0,s.jsx)(t.Z,{itemClass:"page-item",prevPageText:"Previous",nextPageText:"Next",linkClass:"page-link",activePage:a+1,itemsCountPerPage:n,totalItemsCount:r.count,pageRangeDisplayed:5,hideFirstLastPages:!0,onChange:function(e){return i(e-1)}})})]})}},1629:function(e,a,n){n.d(a,{o:function(){return s}});var t=n(184),s=function(e){var a=e.dateTime,n=new Date(a).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return(0,t.jsx)("span",{children:n})}},2805:function(e,a,n){n.d(a,{d:function(){return r}});n(2791);var t=n.p+"static/media/edit-icon.99f293607452e6df8a5fe12a6b47b2b0.svg",s=n(184),r=function(e){var a=e.onClick;return(0,s.jsx)("img",{style:{cursor:"pointer"},src:t,onClick:a})}},9324:function(e,a,n){n.d(a,{q:function(){return s}});var t=n(184),s=function(e){return null===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-warning",children:"Null"}):0===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-danger",children:"Deleted"}):1===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-success",children:"Active"}):2===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-warning",children:"Hold"}):void 0}},3179:function(e,a,n){n.r(a),n.d(a,{Services:function(){return Z}});var t=n(9439),s=n(2791),r=n(9781),i=n(6403),l=n(2917),c=n(4849),d=n(2806),o=n(7883),u=n(1629),h=n(2805),m=n(9324),x=n(3418),f=n(9930),j=n(1413),p=n(5705),g=n(8007),v=n(8862),N=(n(8639),n(9513)),b=n.n(N),S=n(184),y=(0,g.Ry)({name:(0,g.Z_)().required("Name is required")}),C=function(e){var a=e.initialValues,n=e.onSubmit,r=e.isEdit,i=void 0!==r&&r,l=(e.isAdd,(0,p.TA)({initialValues:a,onSubmit:function(e,a){(0,a.validateForm)(e).then((function(a){var t=e.startTime?"".concat(new Date(e.startDate).toISOString().split("T")[0],"T").concat(e.startTime):"",s=e.endTime?"".concat(new Date(e.endDate).toISOString().split("T")[0],"T").concat(e.endTime):"";n((0,j.Z)((0,j.Z)({},e),{},{startTime:t,endTime:s}))}))},validationSchema:y})),c=(0,s.useState)([]),o=(0,t.Z)(c,2),u=o[0],h=o[1];return(0,s.useEffect)((function(){d.b.get("/merchants?pageIndex=0&pageSize=200").then((function(e){var a,n;return null===(a=e.data)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.map((function(e){return{id:e.userId,label:"".concat(e.tradeName)}}))})).then((function(e){h(e),a.merchantUserId&&a.merchantUserId&&l.setFieldValue("MerchantID",e.filter((function(e){return e.id===a.merchantUserId})))}))}),[]),(0,S.jsxs)("form",{onSubmit:l.handleSubmit,children:[(0,S.jsxs)("div",{className:"row",children:[i?null:(0,S.jsx)("aside",{className:"col-md-4",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{for:"merchantUserId",children:"MerchantUserId *"}),(0,S.jsx)(v.pY,{selected:l.values.MerchantID,id:"merchantUserId",options:u,onChange:function(e){e&&e.length>0?l.setFieldValue("merchantUserId",e[0].id):l.setFieldValue("merchantUserId","")},placeholder:"Choose a MerchantUser..."}),(0,S.jsx)("div",{className:"invalid-feedback",children:l.errors.merchantUserId})]})}),(0,S.jsx)("aside",{className:"col-md-4",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"name",children:"Name *"}),(0,S.jsx)("input",{type:"text",id:"name",value:l.values.name,onChange:l.handleChange,className:"form-control form-control-lg",placeholder:"Enter name"}),(0,S.jsx)("div",{className:"invalid-feedback",children:l.errors.name})]})}),(0,S.jsx)("aside",{className:"col-md-4",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"rank",children:"Rank"}),(0,S.jsx)("input",{type:"number",id:"rank",value:l.values.rank,onChange:l.handleChange,className:"form-control form-control-lg",placeholder:"Enter duration"})]})}),(0,S.jsx)("aside",{className:"col-md-4",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"duration",children:"Duration"}),(0,S.jsx)("input",{type:"number",id:"duration",value:l.values.duration,onChange:l.handleChange,className:"form-control form-control-lg",placeholder:"Enter duration"})]})}),(0,S.jsx)("aside",{className:"col-md-4",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"appointmentPerSlot",children:"Appointment-Per-Slot"}),(0,S.jsx)("input",{type:"number",id:"appointmentPerSlot",value:l.values.appointmentPerSlot,onChange:l.handleChange,className:"form-control form-control-lg",placeholder:"Enter duration"})]})}),(0,S.jsx)("aside",{className:"col-md-4",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"startDate",children:"StartDate *"}),(0,S.jsx)(b(),{selected:l.values.startDate?new Date(l.values.startDate):null,onChange:function(e){l.setFieldValue("startDate",e),l.setFieldTouched("startDate")},className:"form-control"}),(0,S.jsx)("div",{className:"invalid-feedback",children:l.errors.startDate})]})}),(0,S.jsx)("aside",{className:"col-md-4",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"startTime",children:"StartTime  *"}),(0,S.jsx)("input",{type:"time",id:"startTime",value:l.values.startTime,onChange:l.handleChange,onBlur:l.handleBlur,className:"form-control form-control-lg",placeholder:"Enter startTime"})]})}),(0,S.jsx)("aside",{className:"col-md-4",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"endDate",children:"EndDate"}),(0,S.jsx)(b(),{selected:l.values.endDate?new Date(l.values.endDate):null,onChange:function(e){l.setFieldValue("endDate",e),l.setFieldTouched("endDate")},className:"form-control"})]})}),(0,S.jsx)("aside",{className:"col-md-4",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"endTime",children:"EndTime  *"}),(0,S.jsx)("input",{type:"time",id:"endTime",value:l.values.endTime,onChange:l.handleChange,onBlur:l.handleBlur,className:"form-control form-control-lg",placeholder:"Enter Time"})]})}),(0,S.jsx)("aside",{className:"col-md-4",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"status",children:"status"}),(0,S.jsxs)("select",{id:"status",className:"form-control select2",onChange:l.handleChange,value:l.values.status,children:[(0,S.jsx)("option",{value:"1",children:"Active"}),(0,S.jsx)("option",{value:"2",children:"Hold"}),(0,S.jsx)("option",{value:"0",children:"Deleted"})]})]})}),(0,S.jsx)("aside",{className:"col-md-12",children:(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"description",children:"Description"}),(0,S.jsx)("textarea",{type:"text",id:"description",value:l.values.description,onChange:l.handleChange,className:"form-control form-control-lg",placeholder:"Enter description"})]})})]}),(0,S.jsx)("div",{className:"modal-footer d-flex justify-content-end",children:(0,S.jsx)("button",{type:"submit",className:"btn mb-2 btn-primary",children:"Save"})})]})},D=function(e){return d.b.post("/services",e)},k=function(e){var a=e.handleSuccess,n=e.handleClose,t=(0,x.D)({mutationFn:D});return(0,S.jsxs)(f.Z,{show:!0,onHide:n,size:"lg",children:[(0,S.jsxs)(f.Z.Header,{closeButton:!1,children:[(0,S.jsx)(f.Z.Title,{children:"New Service"}),(0,S.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:n,children:(0,S.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,S.jsx)(f.Z.Body,{children:(0,S.jsx)(C,{initialValues:{fileId:"b2a68eb4-70ea-4b3e-8404-6f003a0dcf17",merchantUserId:"",name:"",duration:"",description:"",appointmentPerSlot:"",startDate:"",startTime:"",endDate:"",endTime:"",rank:"",status:""},onSubmit:function(e){t.mutate(e,{onSuccess:a})},isAdd:!0})})]})},T=function(e){return d.b.put("/services/".concat(e.id),e)},I=function(e){var a=e.handleSuccess,n=e.handleClose,t=e.id,s=(0,l.a)({queryKey:["Services-details",t],queryFn:function(){return function(e){return d.b.get("/services/".concat(e)).then((function(e){return e.data}))}(t)}}),r=s.data,i=(s.error,(0,x.D)({mutationFn:T}));return(0,S.jsx)(S.Fragment,{children:r&&(0,S.jsxs)(f.Z,{show:!0,onHide:n,size:"lg",children:[(0,S.jsxs)(f.Z.Header,{closeButton:!1,children:[(0,S.jsx)(f.Z.Title,{children:"Edit Service"}),(0,S.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:n,children:(0,S.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,S.jsx)(f.Z.Body,{children:(0,S.jsx)(C,{initialValues:r,onSubmit:function(e){i.mutate((0,j.Z)((0,j.Z)({},e),{},{id:t}),{onSuccess:a})},isEdit:!0})})]})})},Z=function(){var e=(0,i.NL)(),a=(0,s.useState)(0),n=(0,t.Z)(a,2),x=n[0],f=n[1],j=(0,s.useState)(!1),p=(0,t.Z)(j,2),g=p[0],v=p[1],N=(0,s.useState)(!1),b=(0,t.Z)(N,2),y=b[0],C=b[1],D=(0,s.useState)(),T=(0,t.Z)(D,2),Z=T[0],w=T[1],F=(0,s.useState)(""),A=(0,t.Z)(F,2),U=A[0],B=A[1],E=(0,s.useState)(""),P=(0,t.Z)(E,2),q=P[0],z=P[1],V=(0,s.useState)(""),H=(0,t.Z)(V,2),L=H[0],_=H[1],M=(0,s.useState)(""),R=(0,t.Z)(M,2),O=R[0],K=R[1],$=(0,s.useState)(!1),G=(0,t.Z)($,2),Q=(G[0],G[1],(0,l.a)({queryKey:["Services",x,U,q,L,O],queryFn:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;return d.b.get("/services?pageIndex=".concat(e,"&pageSize=").concat(a,"&search=").concat(n,"&sortBy=").concat(t,"&sortOrder=").concat(s,"&status=").concat(r)).then((function(e){return e.data}))}(x,20,U,q,L,O)},keepPreviousData:!0})),Y=Q.data,J=Q.refetch,W=Q.isLoading,X=(0,s.useState)([]),ee=(0,t.Z)(X,2),ae=ee[0],ne=ee[1];(0,s.useEffect)((function(){d.b.get("/users?pageIndex=0&pageSize=1400").then((function(e){return e.data})).then((function(e){ne(e),console.log(e)})).catch((function(e){console.error("Error fetching categories:",e)}))}),[]);var te=(0,s.useState)([]),se=(0,t.Z)(te,2),re=se[0],ie=se[1];(0,s.useEffect)((function(){d.b.get("/merchants?pageIndex=0&pageSize=200").then((function(e){return e.data})).then((function(e){ie(e),console.log(e)})).catch((function(e){console.error("Error fetching categories:",e)}))}),[]);var le=function(e,a){var n=e.split("?")[1].split("=")[1];return"https://app.cikka.com.au/api/files/file-preview?fileName=".concat(n,"&folderName=").concat(a)};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"row justify-content-center",children:(0,S.jsxs)("div",{className:"col-12",children:[(0,S.jsxs)("div",{className:"row heading-add",children:[(0,S.jsx)("aside",{className:"ml-2 mr-2",children:(0,S.jsx)("h2",{className:"mb-0 page-title",children:"Services"})}),(0,S.jsx)("form",{className:"form-inline  mr-auto searchform",children:(0,S.jsx)("input",{className:"form-control mr-sm-2 border-0",onChange:function(e){var a=e.target.value;B(a),J()},type:"text",style:{background:"white"},placeholder:"Search","aria-label":"Search"})}),(0,S.jsx)("aside",{className:"col-sm-2 add-sec",children:(0,S.jsx)("button",{className:"bttn",onClick:function(){return v(!0)},children:"Add"})})]}),(0,S.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,S.jsx)("aside",{className:"col-md-4 mt-2 mt-md-0 mb-2 mb-md-0",children:(0,S.jsxs)("select",{className:"form-control",onChange:function(e){var a=e.target.value;z(a),console.log(a),J()},style:{background:"white"},"aria-label":"select",children:[(0,S.jsx)("option",{value:"",children:"sortBy"}),(0,S.jsx)("option",{value:"id",children:"ID"})]})}),(0,S.jsx)("aside",{className:"col-md-4 mt-2 mt-md-0 mb-2 mb-md-0",children:(0,S.jsxs)("select",{className:"form-control",onChange:function(e){var a=e.target.value;_(a),console.log(a),J()},style:{background:"white"},"aria-label":"select",children:[(0,S.jsx)("option",{value:"",children:"sortOrder"}),(0,S.jsx)("option",{value:"ASC",children:"ASC"}),(0,S.jsx)("option",{value:"DESC",children:"DESC"})]})}),(0,S.jsx)("aside",{className:"col-md-4 mt-2 mt-md-0 mb-2 mb-md-0",children:(0,S.jsxs)("select",{className:"form-control",onChange:function(e){var a=e.target.value;K(a),console.log(a),J()},style:{background:"white"},"aria-label":"select",children:[(0,S.jsx)("option",{value:"",children:"STATUS"}),(0,S.jsx)("option",{value:"1",children:"Active"}),(0,S.jsx)("option",{value:"2",children:"Hold"}),(0,S.jsx)("option",{value:"0",children:"Deleted"})]})})]}),(0,S.jsx)("div",{className:"row my-2",children:(0,S.jsx)("div",{className:"col-md-12",children:(0,S.jsx)("div",{className:"card shadow",children:(0,S.jsxs)("div",{className:"card-body",children:[(0,S.jsx)("div",{className:"resp-table services-tb",children:(0,S.jsxs)("table",{className:"table",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{children:"Actions"}),(0,S.jsx)("th",{children:"Status"}),(0,S.jsx)("th",{children:"Image"}),(0,S.jsx)("th",{children:"ID"}),(0,S.jsx)("th",{children:"Merchant-UserId"}),(0,S.jsx)("th",{children:"Name"}),(0,S.jsx)("th",{children:"duration"}),(0,S.jsx)("th",{children:"Description"}),(0,S.jsx)("th",{children:"Rank"}),(0,S.jsx)("th",{children:"CreatedBy"}),(0,S.jsx)("th",{children:"UpdatedBy"}),(0,S.jsx)("th",{children:"CreatedAt"}),(0,S.jsx)("th",{children:"UpdatedAt"})]})}),(0,S.jsx)("tbody",{children:W?(0,S.jsx)("tr",{children:(0,S.jsx)("td",{rowSpan:"10",colSpan:"15",children:(0,S.jsx)("div",{className:"text-center py-5",children:(0,S.jsx)(c.Z,{animation:"border"})})})}):Y.data.map((function(e){return(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{className:"actions",children:(0,S.jsx)(h.d,{onClick:(a=e.id,function(){w(a),C(!0)})})}),(0,S.jsx)("td",{children:(0,S.jsx)(m.q,{code:e.status})}),(0,S.jsx)("td",{children:e.fileUpload&&e.fileUpload.filePath?(0,S.jsx)("img",{src:le(e.fileUpload.filePath,e.fileUpload.folderName),alt:"logo",className:"circle-logo"}):(0,S.jsx)("img",{src:r,alt:"demoLogo",className:"circle-logo"})}),(0,S.jsx)("td",{children:e.id}),(0,S.jsx)("td",{children:re&&re.data&&re.data.find((function(a){return a.userId===e.merchantUserId}))?function(){var a=re.data.find((function(a){return a.userId===e.merchantUserId}));return"".concat(a.tradeName||"N/A")}():e.createdBy}),(0,S.jsx)("td",{children:e.name}),(0,S.jsx)("td",{children:e.duration}),(0,S.jsx)("td",{children:e.description}),(0,S.jsx)("td",{children:e.rank}),(0,S.jsx)("td",{children:ae&&ae.data&&ae.data.find((function(a){return a.id===e.createdBy}))?function(){var a=ae.data.find((function(a){return a.id===e.createdBy}));return"".concat(a.firstName||"N/A"," ").concat(a.lastName||"N/A")}():e.createdBy}),(0,S.jsx)("td",{children:ae&&ae.data&&ae.data.find((function(a){return a.id===e.updatedBy}))?function(){var a=ae.data.find((function(a){return a.id===e.updatedBy}));return"".concat(a.firstName||"N/A"," ").concat(a.lastName||"N/A")}():e.updatedBy}),(0,S.jsx)("td",{children:(0,S.jsx)(u.o,{dateTime:e.createdAt})}),(0,S.jsx)("td",{children:(0,S.jsx)(u.o,{dateTime:e.updatedAt})})]},e.id);var a}))})]})}),W?null:(0,S.jsx)(o.$,{page:x,pageSize:20,data:Y,setPage:f})]})})})})]})}),g?(0,S.jsx)(k,{handleSuccess:function(){v(!1),J()},handleClose:function(){return v(!1)}}):null,y?(0,S.jsx)(I,{handleSuccess:function(){e.invalidateQueries({queryKey:["Services-details",Z]}),C(!1),J()},id:Z,handleClose:function(){return C(!1)}}):null]})}}}]);
//# sourceMappingURL=973.9a4dc22a.chunk.js.map