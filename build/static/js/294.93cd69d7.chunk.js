"use strict";(self.webpackChunksikka_admin_app=self.webpackChunksikka_admin_app||[]).push([[294],{2806:function(e,n,a){a.d(n,{b:function(){return t}});var t=a(1243).Z.create({baseURL:"https://app.cikka.com.au/api"});t.interceptors.request.use((function(e){var n=localStorage.getItem("token");return n&&(e.headers.Authorization="Bearer "+n),e}),(function(e){return Promise.reject(e)})),t.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))},1629:function(e,n,a){a.d(n,{o:function(){return s}});var t=a(184),s=function(e){var n=e.dateTime;return(0,t.jsx)("span",{children:new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZone:"UTC"}).format(new Date(n))})}},9324:function(e,n,a){a.d(n,{q:function(){return s}});var t=a(184),s=function(e){return null===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-warning",children:"Null"}):0===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-danger",children:"Deleted"}):1===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-success",children:"Active"}):2===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-warning",children:"Hold"}):void 0}},4294:function(e,n,a){a.r(n),a.d(n,{ViewMerchants:function(){return x}});var t=a(1413),s=a(9439),c=a(2791),r=a(2917),i=a(7689),d=a(2806),l=a(9324),o=(a(1629),a(1087)),h=a(4849),m=a(4045),u=a(184),x=function(){var e=(0,i.UO)().userId;console.log(e);var n=(0,c.useState)("cikkaPurchase"),a=(0,s.Z)(n,2),x=a[0],j=a[1],p=function(e){j(e)},N=(0,c.useState)(function(){var e=new Date,n=e.getFullYear(),a=e.getMonth()+1,t=e.getDate();a<10&&(a="0"+a);t<10&&(t="0"+t);return"".concat(n,"-").concat(a,"-").concat(t)}()),v=(0,s.Z)(N,2),k=v[0],b=v[1];(0,c.useEffect)((function(){}),[k]);var g=(0,r.a)({queryKey:["transaction-details",e],queryFn:function(){return function(e){return d.b.get("/cikka-transactions/purchase?userId=".concat(e)).then((function(e){return e.data}))}(e)}}),f=g.data,w=g.isLoading,y=(g.error,(0,r.a)({queryKey:["appointments-details",e,k],queryFn:function(){return function(e,n){return d.b.get("/appointments?pageIndex=0&pageSize=20&sortBy=startTime&sortOrder=ASC&status=1&merchantUserId=".concat(e,"&startTime=").concat(n)).then((function(e){return e.data}))}(e,k)}})),C=y.data,S=y.isLoading,T=(y.error,function(e){var n={};return e.forEach((function(e){var a="".concat(e.service.name,"_").concat(e.user.firstName,"_").concat(e.user.lastName,"_").concat(e.user.mobileNumber,"_").concat(e.startTime,"_").concat(e.endTime);n[a]?n[a].peopleCount++:n[a]=(0,t.Z)((0,t.Z)({},e),{},{serviceName:e.service.name,userName:"".concat(e.user.firstName," ").concat(e.user.lastName),contact:"string"===typeof e.user.mobileNumber?"--":e.user.mobileNumber,peopleCount:1})})),Object.values(n)});function P(e){return e<10?"0"+e:e}return(0,u.jsx)(u.Fragment,{children:f&&C&&(console.log(f),(0,u.jsx)("div",{className:"row justify-content-center",children:(0,u.jsxs)("div",{className:"col-12",children:[(0,u.jsxs)("div",{className:"row heading-add",children:[(0,u.jsx)("aside",{className:"col-sm-10 mt-3 mb-3",children:(0,u.jsx)(o.OL,{to:"/Merchants",children:(0,u.jsx)("i",{className:"fe fe-arrow-left-circle fe-24"})})}),(0,u.jsx)("aside",{className:"col-sm-10",children:(0,u.jsx)("h2",{className:"mb-0 page-title",children:"Cikka Profile Details"})})]}),(0,u.jsx)("div",{className:"row my-2",children:(0,u.jsxs)("div",{className:"col-md-6",children:[(0,u.jsx)("div",{className:"card shadow",children:(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsx)("h5",{className:"card-title",children:"Cikka Balance Details"}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("div",{className:"col-md-5 mt-1",children:(0,u.jsx)("label",{children:"Purchase Value"})}),(0,u.jsx)("div",{className:"col-md-7 mt-1",children:(0,u.jsx)("label",{children:f.purchaseValue})}),(0,u.jsx)("div",{className:"col-md-5 mt-1",children:(0,u.jsx)("label",{children:"cikka Sender Transaction"})}),(0,u.jsx)("div",{className:"col-md-7 mt-1",children:(0,u.jsx)("label",{children:f.cikkaSenderTransaction})}),(0,u.jsx)("div",{className:"col-md-5 mt-1",children:(0,u.jsx)("label",{children:"Cikka Receiver Transaction"})}),(0,u.jsx)("div",{className:"col-md-7 mt-1",children:(0,u.jsx)("label",{children:f.cikkaReceiverTransaction})}),(0,u.jsx)("div",{className:"col-md-5 mt-1",children:(0,u.jsx)("label",{children:"Cikka Balance"})}),(0,u.jsx)("div",{className:"col-md-7 mt-1",children:(0,u.jsx)("label",{children:f.cikkaBalance})})]})]})}),(0,u.jsx)("div",{className:"col-md-6"})]})}),(0,u.jsx)("div",{className:"row my-2 mt-5",children:(0,u.jsx)("div",{className:"col-md-12",children:(0,u.jsx)("div",{className:"card shadow",children:(0,u.jsxs)("div",{className:"card-body",children:[(0,u.jsxs)("ul",{className:"nav nav-tabs mb-3",children:[(0,u.jsx)("li",{className:"nav-item",children:(0,u.jsx)("button",{className:"nav-link ".concat("cikkaPurchase"===x?"active":""),onClick:function(){return p("cikkaPurchase")},children:"Cikka Purchase"})}),(0,u.jsx)("li",{className:"nav-item",children:(0,u.jsx)("button",{className:"nav-link ".concat("cikkaTransaction"===x?"active":""),onClick:function(){return p("cikkaTransaction")},children:"Cikka Transaction"})}),(0,u.jsx)("li",{className:"nav-item",children:(0,u.jsx)("button",{className:"nav-link ".concat("appointments"===x?"active":""),onClick:function(){return p("appointments")},children:"Appointments"})})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{className:"row my-2 mt-3",children:(0,u.jsxs)("div",{className:"col-md-12",children:["cikkaPurchase"===x&&(0,u.jsxs)("div",{className:"resp-table cikka-purchase-tb",children:[(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("aside",{className:"col-sm-10",children:(0,u.jsx)("h5",{className:"card-title",children:"Cikka Purchase"})})}),(0,u.jsx)("div",{children:(0,u.jsxs)("table",{className:"table mt-2",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"id"}),(0,u.jsx)("th",{children:"userId"}),(0,u.jsx)("th",{children:"purchaseStatus"}),(0,u.jsx)("th",{children:"purchaseValue"}),(0,u.jsx)("th",{children:"paymentDetails"}),(0,u.jsx)("th",{children:"createdBy"}),(0,u.jsx)("th",{children:"updatedBy"}),(0,u.jsx)("th",{children:"createdAt"}),(0,u.jsx)("th",{children:"updatedAt"}),(0,u.jsx)("th",{children:"status"})]})}),(0,u.jsx)("tbody",{children:w?(0,u.jsx)("tr",{children:(0,u.jsx)("td",{rowSpan:"10",colSpan:"13",children:(0,u.jsx)("div",{className:"text-center py-5",children:(0,u.jsx)(h.Z,{animation:"border"})})})}):f.cikkaPurchase&&f.cikkaPurchase.length>0?(0,u.jsx)(u.Fragment,{children:f.cikkaPurchase.map((function(e){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.id}),(0,u.jsx)("td",{children:e.userId}),(0,u.jsx)("td",{children:e.purchaseStatus}),(0,u.jsx)("td",{children:e.purchaseValue}),(0,u.jsx)("td",{children:e.paymentDetails}),(0,u.jsx)("td",{children:e.createdBy}),(0,u.jsx)("td",{children:e.updatedBy}),(0,u.jsx)("td",{children:e.createdAt}),(0,u.jsx)("td",{children:e.updatedAt}),(0,u.jsx)("td",{children:e.status})]},e.id)}))}):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{rowSpan:"10",colSpan:"13",children:(0,u.jsx)("div",{className:"text-center py-5",children:(0,u.jsx)("strong",{children:"No purchase were done"})})})})})]})})]}),(0,u.jsx)("div",{className:"col-md-6"})]})}),(0,u.jsx)("div",{children:"cikkaTransaction"===x&&(0,u.jsxs)("div",{className:"resp-table cikka-transaction-tb",children:[(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("aside",{className:"col-sm-10",children:(0,u.jsx)("h5",{className:"card-title",children:"Cikka Transaction"})})}),(0,u.jsx)("div",{children:(0,u.jsxs)("table",{className:"table mt-2",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"id"}),(0,u.jsx)("th",{children:"senderId"}),(0,u.jsx)("th",{children:"receiverId"}),(0,u.jsx)("th",{children:"merchantId"}),(0,u.jsx)("th",{children:"merchant"}),(0,u.jsx)("th",{children:"transactionValue"}),(0,u.jsx)("th",{children:"memberCutValue"}),(0,u.jsx)("th",{children:"merchantCutValue"}),(0,u.jsx)("th",{children:"superAgentCutValue"}),(0,u.jsx)("th",{children:"transactionPercentage"}),(0,u.jsx)("th",{children:"transactionType"}),(0,u.jsx)("th",{children:"transactionStatus"}),(0,u.jsx)("th",{children:"createdBy"}),(0,u.jsx)("th",{children:"updatedBy"}),(0,u.jsx)("th",{children:"createdAt"}),(0,u.jsx)("th",{children:"updatedAt"}),(0,u.jsx)("th",{children:"status"})]})}),(0,u.jsx)("tbody",{children:w?(0,u.jsx)("tr",{children:(0,u.jsx)("td",{rowSpan:"10",colSpan:"4",children:(0,u.jsx)("div",{className:"text-center py-5",children:(0,u.jsx)(h.Z,{animation:"border"})})})}):f.cikkaTransaction&&f.cikkaTransaction.length>0?(0,u.jsx)(u.Fragment,{children:f.cikkaTransaction.map((function(e){return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e.id}),(0,u.jsx)("td",{children:e.senderId}),(0,u.jsx)("td",{children:e.receiverId}),(0,u.jsx)("td",{children:e.merchantId}),(0,u.jsx)("td",{children:e.merchant}),(0,u.jsx)("td",{children:e.transactionValue}),(0,u.jsx)("td",{children:e.memberCutValue}),(0,u.jsx)("td",{children:e.merchantCutValue}),(0,u.jsx)("td",{children:e.superAgentCutValue}),(0,u.jsx)("td",{children:e.transactionPercentage}),(0,u.jsx)("td",{children:e.transactionType}),(0,u.jsx)("td",{children:e.transactionStatus}),(0,u.jsx)("td",{children:e.createdBy}),(0,u.jsx)("td",{children:e.updatedBy}),(0,u.jsx)("td",{children:e.createdAt}),(0,u.jsx)("td",{children:e.updatedAt}),(0,u.jsx)("td",{children:e.status})]},e.id)}))}):(0,u.jsx)("tr",{children:(0,u.jsx)("td",{rowSpan:"10",colSpan:"13",children:(0,u.jsx)("div",{className:"text-center py-5",children:(0,u.jsx)("strong",{children:"No transaction were done"})})})})})]})})]})}),(0,u.jsx)("div",{children:"appointments"===x&&(0,u.jsxs)("div",{className:"resp-table cikka-transaction-tb",children:[(0,u.jsx)("div",{className:"row",children:(0,u.jsx)("aside",{className:"col-sm-10",children:(0,u.jsx)("h5",{className:"card-title",children:"Appointments"})})}),(0,u.jsxs)("div",{className:"row",children:[(0,u.jsx)("aside",{className:"col-sm-4 mt-2 mr-2",children:(0,u.jsx)("input",{type:"date",name:"date",value:k,onChange:function(e){b(e.target.value)},className:"form-control form-control-lg"})}),(0,u.jsx)("aside",{className:"col-sm-2 mt-2  add-sec",children:(0,u.jsx)("button",{className:"bttn",onClick:function(){if(C&&C.data){var e=T(C.data),n=0,a=e.map((function(e){return n+=e.peopleCount,{ServiceName:e.service.name,UserName:"".concat(e.user.firstName," ").concat(e.user.lastName),Contact:"string"===e.contact?"--":e.contact,SpecialRequest:"string"===e.specialRequest?"--":e.specialRequest,PeopleCount:e.peopleCount,StartTime:new Date(e.startTime).toLocaleString("en-GB",{timeZone:"Europe/London"}),EndTime:new Date(e.endTime).toLocaleString("en-GB",{timeZone:"Europe/London"})}})),t={ServiceName:"",UserName:"",Contact:"",SpecialRequest:"Total:",PeopleCount:n,StartTime:"",EndTime:""};a.push(t);var s=m.P6.json_to_sheet(a);s["!cols"]||(s["!cols"]=[]);[{wch:35},{wch:20},{wch:20},{wch:20},{wch:8},{wch:25},{wch:25}].forEach((function(e,n){s["!cols"][n]=e}));var c=m.P6.book_new();m.P6.book_append_sheet(c,s,"bookings");var r=new Date,i="".concat(r.getFullYear()).concat(P(r.getMonth()+1)).concat(P(r.getDate())).concat(P(r.getHours())).concat(P(r.getMinutes())),d="bookings_".concat(i,".xlsx");m.NC(c,d)}else console.error("No appointments data available to download.")},children:(0,u.jsx)("i",{className:"fe fe-download fe-16",children:(0,u.jsx)("span",{children:"  Download "})})})})]}),(0,u.jsx)("div",{children:(0,u.jsxs)("table",{className:"table mt-2",children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Status"}),(0,u.jsx)("th",{children:"service Name"}),(0,u.jsx)("th",{children:"User Name"}),(0,u.jsx)("th",{children:"Contact"}),(0,u.jsx)("th",{children:"SpecialRequest"}),(0,u.jsx)("th",{children:"People"}),(0,u.jsx)("th",{children:"StartTime"}),(0,u.jsx)("th",{children:"EndTime"})]})}),(0,u.jsx)("tbody",{children:function(){if(S)return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"9",children:(0,u.jsx)("div",{className:"text-center py-5",children:(0,u.jsx)(h.Z,{animation:"border"})})})});if(C&&C.data.length>0){var e=T(C.data),n=0,a=e.map((function(e,a){return n+=e.peopleCount,(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:(0,u.jsx)(l.q,{code:e.status})}),(0,u.jsx)("td",{children:e.serviceName}),(0,u.jsx)("td",{children:e.userName}),(0,u.jsx)("td",{children:e.contact}),(0,u.jsx)("td",{children:e.specialRequest}),(0,u.jsx)("td",{children:e.peopleCount}),(0,u.jsx)("td",{children:new Date(e.startTime).toLocaleString("en-GB",{timeZone:"Europe/London"})}),(0,u.jsx)("td",{children:new Date(e.endTime).toLocaleString("en-GB",{timeZone:"Europe/London"})})]},a)}));return a.push((0,u.jsx)("tr",{children:(0,u.jsxs)("td",{children:[(0,u.jsx)("strong",{children:"Total:"}),"\xa0\xa0",n]})},"total")),a}return(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"9",children:(0,u.jsx)("div",{className:"text-center py-5",children:(0,u.jsx)("strong",{children:"No appointments were done"})})})})}()})]})})]})})]})]})})})})]})}))})}}}]);
//# sourceMappingURL=294.93cd69d7.chunk.js.map