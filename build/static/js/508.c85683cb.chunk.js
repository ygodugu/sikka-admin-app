"use strict";(self.webpackChunksikka_admin_app=self.webpackChunksikka_admin_app||[]).push([[508],{2806:function(e,a,n){n.d(a,{b:function(){return s}});var s=n(1243).Z.create({baseURL:"https://app.cikka.com.au/api"});s.interceptors.request.use((function(e){var a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer "+a),e}),(function(e){return Promise.reject(e)})),s.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))},7883:function(e,a,n){n.d(a,{$:function(){return i}});var s=n(3637),t=n(184),i=function(e){var a=e.page,n=e.pageSize,i=e.data,l=e.setPage;return(0,t.jsxs)("div",{className:"row pagin-sec",children:[(0,t.jsx)("div",{className:"col-sm-12 col-md-5",children:(0,t.jsx)("div",{className:"dataTables_info",role:"status","aria-live":"polite",children:"Showing ".concat(a*n+1," to  ").concat(a*n+i.data.length," of ").concat(i.count," entries")})}),(0,t.jsx)("div",{className:"col-sm-12 col-md-7",style:{display:"flex",justifyContent:"flex-end"},children:(0,t.jsx)(s.Z,{itemClass:"page-item",prevPageText:"Previous",nextPageText:"Next",linkClass:"page-link",activePage:a+1,itemsCountPerPage:n,totalItemsCount:i.count,pageRangeDisplayed:5,hideFirstLastPages:!0,onChange:function(e){return l(e-1)}})})]})}},1629:function(e,a,n){n.d(a,{o:function(){return t}});var s=n(184),t=function(e){var a=e.dateTime,n=new Date(a).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return(0,s.jsx)("span",{children:n})}},2805:function(e,a,n){n.d(a,{d:function(){return i}});n(2791);var s=n.p+"static/media/edit-icon.99f293607452e6df8a5fe12a6b47b2b0.svg",t=n(184),i=function(e){var a=e.onClick;return(0,t.jsx)("img",{style:{cursor:"pointer"},src:s,onClick:a})}},9324:function(e,a,n){n.d(a,{q:function(){return t}});var s=n(184),t=function(e){return null===e.code?(0,s.jsx)("span",{className:"badge badge-pill badge-warning",children:"Null"}):0===e.code?(0,s.jsx)("span",{className:"badge badge-pill badge-danger",children:"Deleted"}):1===e.code?(0,s.jsx)("span",{className:"badge badge-pill badge-success",children:"Active"}):2===e.code?(0,s.jsx)("span",{className:"badge badge-pill badge-warning",children:"Hold"}):void 0}},508:function(e,a,n){n.r(a),n.d(a,{BusinessCategories:function(){return P}});var s=n(9439),t=n(2791),i=n(9781),l=n(6403),r=n(2917),o=n(2805),c=n(2806),d=n(7883),u=n(1629),m=n(9324),h=n(18),f=n(4849),g=n(5987),p=n(1413),x=n(3418),v=n(9930),j=n(5705),b=n(8007),N=n(184),y=(0,b.Ry)({name:(0,b.Z_)().required("Name is required")}),C=function(e){var a=e.initialValues,n=e.onSubmit,i=e.isAdd,l=void 0!==i&&i,r=(0,t.useState)(),o=(0,s.Z)(r,2),c=o[0],d=o[1],u=(0,j.TA)({initialValues:a,onSubmit:function(e,a){(0,a.validateForm)(e).then((function(a){n((0,p.Z)((0,p.Z)({},e),{},{file:c}))}))},validationSchema:y});return(0,N.jsxs)("form",{onSubmit:u.handleSubmit,children:[(0,N.jsxs)("div",{className:"row",children:[(0,N.jsx)("aside",{className:"col-md-6",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsx)("label",{htmlFor:"name",children:"Name *"}),(0,N.jsx)("input",{type:"text",id:"name",value:u.values.name,onChange:u.handleChange,className:"form-control form-control-lg",placeholder:"Enter name"}),(0,N.jsx)("div",{className:"invalid-feedback",children:u.errors.name})]})}),(0,N.jsx)("aside",{className:"col-md-6",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsx)("label",{htmlFor:"description",children:"Description"}),(0,N.jsx)("input",{type:"text",id:"description",value:u.values.description,onChange:u.handleChange,className:"form-control form-control-lg",placeholder:"Enter description"})]})}),(0,N.jsx)("aside",{className:"col-md-6",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsx)("label",{htmlFor:"rank",children:"Rank"}),(0,N.jsx)("input",{type:"number",id:"rank",name:"rank",value:u.values.rank,onChange:u.handleChange,onBlur:u.handleBlur,className:"form-control form-control-lg"})]})}),(0,N.jsx)("aside",{className:"col-md-6",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsx)("label",{htmlFor:"uploadImage",children:"UploadImage"}),(0,N.jsx)("input",{type:"file",id:"uploadImage",name:"uploadImage",onChange:function(e){d(e.target.files[0])},className:"form-control form-control-lg"})]})}),(0,N.jsx)("aside",{className:"col-md-6",children:(0,N.jsxs)("div",{className:"form-group",children:[(0,N.jsx)("label",{htmlFor:"status",children:"status"}),(0,N.jsxs)("select",{id:"status",className:"form-control select2",onChange:u.handleChange,value:u.values.status,children:[(0,N.jsx)("option",{value:"1",children:"Active"}),(0,N.jsx)("option",{value:"2",children:"Hold"}),(0,N.jsx)("option",{value:"0",children:"Deleted"})]})]})}),l?null:(0,N.jsx)("aside",{className:"col-md-6",children:u.values.logo.filePath&&u.values.logo.filePath?(0,N.jsx)("img",{src:function(e,a){var n=e.split("?")[1].split("=")[1];return"https://app.cikka.com.au/api/files/file-preview?fileName=".concat(n,"&folderName=").concat(a)}(u.values.logo.filePath,u.values.logo.folderName),alt:"logo",className:"form-image-tag"}):(0,N.jsx)("div",{className:"empty-placeholder",children:"Empty Image"})})]}),(0,N.jsx)("div",{className:"modal-footer d-flex justify-content-end",children:(0,N.jsx)("button",{type:"submit",className:"btn mb-2 btn-primary",children:"Save"})})]})},Z=["file"],S=function(e){return c.b.post("/business-categories",e)},k=function(e){return c.b.post("/file-uploads",e).then((function(e){console.log("Full response from FileUpload:",e.data);var a=e.data.id;if(console.log("ID received from FileUpload:",a),a)return{id:a,response:e.data};throw new Error("No ID was received from FileUpload")}))},w=function(e){var a=e.handleSuccess,n=e.handleClose,s=(0,x.D)({mutationFn:S}),t=function(e){s.mutate((0,p.Z)({},e),{onSuccess:a})};return(0,N.jsxs)(v.Z,{show:!0,onHide:n,size:"lg",children:[(0,N.jsxs)(v.Z.Header,{closeButton:!1,children:[(0,N.jsx)(v.Z.Title,{children:"New BusinessCategories"}),(0,N.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:n,children:(0,N.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,N.jsx)(v.Z.Body,{children:(0,N.jsx)(C,{initialValues:{name:"",description:"",rank:"",status:""},isAdd:!0,onSubmit:function(e){var a=e.file,n=(0,g.Z)(e,Z);if(console.log("handleSubmit called"),console.log("file:",a),a)(function(e){var a=new FormData;return a.append("file",e),a.append("folderName","business_category"),c.b.post("/files/file-upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var a={documentId:"953b775a-2501-4965-9dce-10353b878292",fileName:e.data.fileName,filePath:e.data.url,folderName:"business_category"};return k(a)}))})(a).then((function(e){if(e){var a=e.id;if(a){console.log("Received ID:",a);var s=(0,p.Z)((0,p.Z)({},n),{},{logoId:a});t(s)}else console.log("No ID was received"),t(n)}else console.log("No result from FileUpload")})).catch((function(e){console.error("Error:",e)}));else if(a)t(n);else{console.log("Adding demo ID:");var s=(0,p.Z)((0,p.Z)({},n),{},{logoId:"2b962d4d-1050-4190-ad18-7d3491c3a0fe"});t(s)}}})})]})},D=["file"],I=function(e){return c.b.put("/business-categories/".concat(e.id),e)},A=function(e){return c.b.post("/file-uploads",e).then((function(e){console.log("Full response from FileUpload:",e.data);var a=e.data.id;if(console.log("ID received from FileUpload:",a),a)return{id:a,response:e.data};throw new Error("No ID was received from FileUpload")}))},F=function(e){var a=e.handleSuccess,n=e.handleClose,s=e.id,t=(0,r.a)({queryKey:["BusinessCategories-details",s],queryFn:function(){return function(e){return c.b.get("/business-categories/".concat(e)).then((function(e){return e.data}))}(s)}}),i=t.data,l=(t.error,(0,x.D)({mutationFn:I})),o=function(e){l.mutate((0,p.Z)((0,p.Z)({},e),{},{id:s}),{onSuccess:a})};return(0,N.jsx)(N.Fragment,{children:i&&(0,N.jsxs)(v.Z,{show:!0,onHide:n,size:"lg",children:[(0,N.jsxs)(v.Z.Header,{closeButton:!1,children:[(0,N.jsx)(v.Z.Title,{children:"Edit BusinessCategories"}),(0,N.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:n,children:(0,N.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),(0,N.jsx)(v.Z.Body,{children:(0,N.jsx)(C,{initialValues:i,onSubmit:function(e){var a=e.file,n=(0,g.Z)(e,D);console.log("handleSubmit called"),console.log("file:",a),a?function(e){var a=new FormData;return a.append("file",e),a.append("folderName","business_category"),c.b.post("/files/file-upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var a={documentId:"953b775a-2501-4965-9dce-10353b878292",fileName:e.data.fileName,filePath:e.data.url,folderName:"business_category"};return A(a)}))}(a).then((function(e){if(e){var a=e.id;if(a){console.log("Received ID:",a);var s=(0,p.Z)((0,p.Z)({},n),{},{logoId:a});o(s)}else console.log("No ID was received"),o(n)}else console.log("No result from FileUpload")})).catch((function(e){console.error("Error:",e)})):o(n)}})})]})})},P=function(){var e=(0,l.NL)(),a=(0,t.useState)(0),n=(0,s.Z)(a,2),g=n[0],p=n[1],x=(0,t.useState)(!1),v=(0,s.Z)(x,2),j=v[0],b=v[1],y=(0,t.useState)(!1),C=(0,s.Z)(y,2),Z=C[0],S=C[1],k=(0,t.useState)(),D=(0,s.Z)(k,2),I=D[0],A=D[1],P=(0,t.useState)(""),B=(0,s.Z)(P,2),E=B[0],T=B[1],U=(0,t.useState)(""),L=(0,s.Z)(U,2),H=L[0],R=L[1],q=(0,t.useState)(""),_=(0,s.Z)(q,2),z=_[0],V=_[1],O=(0,t.useState)(""),K=(0,s.Z)(O,2),$=K[0],G=K[1],Q=(0,t.useState)(!1),J=(0,s.Z)(Q,2),M=J[0],W=(J[1],(0,r.a)({queryKey:["businessCategories",g,E,H,z,$],queryFn:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,t=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return c.b.get("/business-categories?pageIndex=".concat(e,"&pageSize=").concat(a,"&search=").concat(n,"&sortBy=").concat(s,"&sortOrder=").concat(t,"&status=").concat(i)).then((function(e){return e.data}))}(g,20,E,H,z,$)},keepPreviousData:!0})),X=W.data,Y=W.refetch,ee=W.isLoading,ae=(0,t.useState)([]),ne=(0,s.Z)(ae,2),se=ne[0],te=ne[1];(0,t.useEffect)((function(){c.b.get("/users?pageIndex=0&pageSize=1400").then((function(e){return e.data})).then((function(e){te(e),console.log(e)})).catch((function(e){console.error("Error fetching categories:",e)}))}),[]);var ie=function(e,a){var n=e.split("?")[1].split("=")[1];return"https://app.cikka.com.au/api/files/file-preview?fileName=".concat(n,"&folderName=").concat(a)};return(0,N.jsxs)(N.Fragment,{children:[M?(0,N.jsxs)(h.Z,{variant:"danger",onClose:function(){return M(!1)},children:[(0,N.jsx)(h.Z.Heading,{children:"Server Error!"}),(0,N.jsx)("p",{children:"Can not user"})]}):null,(0,N.jsx)("div",{className:"row justify-content-center",children:(0,N.jsxs)("div",{className:"col-12",children:[(0,N.jsxs)("div",{className:"row heading-add",children:[(0,N.jsx)("aside",{className:"ml-2 mr-2",children:(0,N.jsx)("h2",{className:"mb-0 page-title",children:"Business Categories"})}),(0,N.jsx)("form",{className:"form-inline  mr-auto searchform",children:(0,N.jsx)("input",{className:"form-control mr-sm-2 border-0",onChange:function(e){var a=e.target.value;T(a),Y()},type:"text",style:{background:"white"},placeholder:"Search","aria-label":"Search"})}),(0,N.jsx)("aside",{className:"col-sm-2 mt-2 add-sec",children:(0,N.jsx)("button",{className:"bttn",onClick:function(){return b(!0)},children:"Add"})})]}),(0,N.jsxs)("div",{className:"d-flex flex-wrap",children:[(0,N.jsx)("aside",{className:"col-md-4 mt-2 mt-md-0 mb-2 mb-md-0",children:(0,N.jsxs)("select",{className:"form-control",onChange:function(e){var a=e.target.value;R(a),console.log(a),Y()},style:{background:"white"},"aria-label":"select",children:[(0,N.jsx)("option",{value:"",children:"sortBy"}),(0,N.jsx)("option",{value:"id",children:"ID"}),(0,N.jsx)("option",{value:"rank",children:"Rank"})]})}),(0,N.jsx)("aside",{className:"col-md-4 mt-2 mt-md-0 mb-2 mb-md-0",children:(0,N.jsxs)("select",{className:"form-control",onChange:function(e){var a=e.target.value;V(a),console.log(a),Y()},style:{background:"white"},"aria-label":"select",children:[(0,N.jsx)("option",{value:"",children:"sortOrder"}),(0,N.jsx)("option",{value:"ASC",children:"ASC"}),(0,N.jsx)("option",{value:"DESC",children:"DESC"})]})}),(0,N.jsx)("aside",{className:"col-md-4 mt-2 mt-md-0 mb-2 mb-md-0",children:(0,N.jsxs)("select",{className:"form-control",onChange:function(e){var a=e.target.value;G(a),console.log(a),Y()},style:{background:"white"},"aria-label":"select",children:[(0,N.jsx)("option",{value:"",children:"STATUS"}),(0,N.jsx)("option",{value:"1",children:"Active"}),(0,N.jsx)("option",{value:"2",children:"Hold"}),(0,N.jsx)("option",{value:"0",children:"Deleted"})]})})]}),(0,N.jsx)("div",{className:"row my-2",children:(0,N.jsx)("div",{className:"col-md-12",children:(0,N.jsx)("div",{className:"card shadow",children:(0,N.jsxs)("div",{className:"card-body",children:[(0,N.jsx)("div",{className:"resp-table business-categories-tb",children:(0,N.jsxs)("table",{className:"table",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{children:"Actions"}),(0,N.jsx)("th",{children:"Status"}),(0,N.jsx)("th",{children:"Image"}),(0,N.jsx)("th",{children:"Rank"}),(0,N.jsx)("th",{children:"ID"}),(0,N.jsx)("th",{children:"Name"}),(0,N.jsx)("th",{children:"Description"}),(0,N.jsx)("th",{children:"CreatedBy"}),(0,N.jsx)("th",{children:"UpdatedBy"}),(0,N.jsx)("th",{children:"CreatedAt"}),(0,N.jsx)("th",{children:"UpdatedAt"})]})}),(0,N.jsx)("tbody",{children:ee?(0,N.jsx)("tr",{children:(0,N.jsx)("td",{rowSpan:"10",colSpan:"13",children:(0,N.jsx)("div",{className:"text-center py-5",children:(0,N.jsx)(f.Z,{animation:"border"})})})}):X.data.map((function(e){return(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"actions",children:(0,N.jsx)(o.d,{onClick:(a=e.id,function(){A(a),S(!0)})})}),(0,N.jsx)("td",{children:(0,N.jsx)(m.q,{code:e.status})}),(0,N.jsx)("td",{children:e.logo&&e.logo.filePath?(0,N.jsx)("img",{src:ie(e.logo.filePath,e.logo.folderName),alt:"logo",className:"circle-logo"}):(0,N.jsx)("img",{src:i,alt:"demoLogo",className:"circle-logo"})}),(0,N.jsx)("td",{children:e.rank}),(0,N.jsx)("td",{children:e.id}),(0,N.jsx)("td",{children:E&&e.name.toLowerCase().includes(E.toLowerCase())?(0,N.jsx)("span",{className:"highlighted",children:e.name}):e.name}),(0,N.jsx)("td",{children:e.description}),(0,N.jsx)("td",{children:se&&se.data&&se.data.find((function(a){return a.id===e.createdBy}))?function(){var a=se.data.find((function(a){return a.id===e.createdBy}));return"".concat(a.firstName||"N/A"," ").concat(a.lastName||"N/A")}():e.createdBy}),(0,N.jsx)("td",{children:se&&se.data&&se.data.find((function(a){return a.id===e.updatedBy}))?function(){var a=se.data.find((function(a){return a.id===e.updatedBy}));return"".concat(a.firstName||"N/A"," ").concat(a.lastName||"N/A")}():e.updatedBy}),(0,N.jsx)("td",{children:(0,N.jsx)(u.o,{dateTime:e.createdAt})}),(0,N.jsx)("td",{children:(0,N.jsx)(u.o,{dateTime:e.updatedAt})})]},e.id);var a}))})]})}),ee?null:(0,N.jsx)(d.$,{page:g,pageSize:20,data:X,setPage:p})]})})})})]})}),j?(0,N.jsx)(w,{handleSuccess:function(){b(!1),Y()},handleClose:function(){return b(!1)}}):null,Z?(0,N.jsx)(F,{handleSuccess:function(){e.invalidateQueries({queryKey:["businessCategories-details",I]}),S(!1),Y()},id:I,handleClose:function(){return S(!1)}}):null]})}},18:function(e,a,n){n.d(a,{Z:function(){return S}});var s=n(1413),t=n(5987),i=n(1694),l=n.n(i),r=n(2791),o=n(239),c=n(9007),d=n(162),u=n(7472),m=n(184),h=["className","bsPrefix","as"],f=(0,u.Z)("h4");f.displayName="DivStyledAsH4";var g=r.forwardRef((function(e,a){var n=e.className,i=e.bsPrefix,r=e.as,o=void 0===r?f:r,c=(0,t.Z)(e,h);return i=(0,d.vE)(i,"alert-heading"),(0,m.jsx)(o,(0,s.Z)({ref:a,className:l()(n,i)},c))}));g.displayName="AlertHeading";var p=g,x=n(6445),v=["className","bsPrefix","as"],j=r.forwardRef((function(e,a){var n=e.className,i=e.bsPrefix,r=e.as,o=void 0===r?x.Z:r,c=(0,t.Z)(e,v);return i=(0,d.vE)(i,"alert-link"),(0,m.jsx)(o,(0,s.Z)({ref:a,className:l()(n,i)},c))}));j.displayName="AlertLink";var b=j,N=n(4418),y=n(473),C=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],Z=r.forwardRef((function(e,a){var n=(0,o.Ch)(e,{show:"onClose"}),i=n.bsPrefix,r=n.show,u=void 0===r||r,h=n.closeLabel,f=void 0===h?"Close alert":h,g=n.closeVariant,p=n.className,x=n.children,v=n.variant,j=void 0===v?"primary":v,b=n.onClose,Z=n.dismissible,S=n.transition,k=void 0===S?N.Z:S,w=(0,t.Z)(n,C),D=(0,d.vE)(i,"alert"),I=(0,c.Z)((function(e){b&&b(!1,e)})),A=!0===k?N.Z:k,F=(0,m.jsxs)("div",(0,s.Z)((0,s.Z)({role:"alert"},A?void 0:w),{},{ref:a,className:l()(p,D,j&&"".concat(D,"-").concat(j),Z&&"".concat(D,"-dismissible")),children:[Z&&(0,m.jsx)(y.Z,{onClick:I,"aria-label":f,variant:g}),x]}));return A?(0,m.jsx)(A,(0,s.Z)((0,s.Z)({unmountOnExit:!0},w),{},{ref:void 0,in:u,children:F})):u?F:null}));Z.displayName="Alert";var S=Object.assign(Z,{Link:b,Heading:p})}}]);
//# sourceMappingURL=508.c85683cb.chunk.js.map