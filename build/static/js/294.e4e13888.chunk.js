"use strict";(self.webpackChunksikka_admin_app=self.webpackChunksikka_admin_app||[]).push([[294],{2806:function(e,a,n){n.d(a,{b:function(){return t}});var t=n(1243).Z.create({baseURL:"https://app.cikka.com.au/api"});t.interceptors.request.use((function(e){var a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer "+a),e}),(function(e){return Promise.reject(e)})),t.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}))},1629:function(e,a,n){n.d(a,{o:function(){return s}});var t=n(184),s=function(e){var a=e.dateTime,n=new Date(a).toLocaleString("en-GB",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0});return(0,t.jsx)("span",{children:n})}},9324:function(e,a,n){n.d(a,{q:function(){return s}});var t=n(184),s=function(e){return null===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-warning",children:"Null"}):0===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-danger",children:"Deleted"}):1===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-success",children:"Active"}):2===e.code?(0,t.jsx)("span",{className:"badge badge-pill badge-warning",children:"Hold"}):void 0}},4294:function(e,a,n){n.r(a),n.d(a,{ViewMerchants:function(){return v}});var t=n(1413),s=n(9439),c=n(2791),r=n(2917),i=n(7689),d=n(2806),l=n(9324),o=(n(1629),n(1087)),h=n(4849),x=n(4045),m=n(2564),j=(n(5462),n(8639),n(9513)),u=n.n(j),p=n(184),v=function(){var e=(0,i.UO)().userId;console.log(e);var a=(0,c.useState)("cikkaPurchase"),n=(0,s.Z)(a,2),j=n[0],v=n[1],N=function(e){v(e)},k=(0,c.useState)(function(){var e=new Date,a=e.getFullYear(),n=e.getMonth()+1,t=e.getDate();n<10&&(n="0"+n);t<10&&(t="0"+t);return"".concat(a,"-").concat(n,"-").concat(t)}()),g=(0,s.Z)(k,2),b=g[0],f=g[1];var w=(0,r.a)({queryKey:["transaction-details",e],queryFn:function(){return function(e){return d.b.get("/cikka-transactions/purchase?userId=".concat(e)).then((function(e){return e.data}))}(e)}}),y=w.data,C=w.isLoading,S=(w.error,(0,r.a)({queryKey:["appointments-details",e,b],queryFn:function(){return function(e,a){return d.b.get("/appointments?pageIndex=0&pageSize=200&sortBy=startTime&sortOrder=ASC&status=1&merchantUserId=".concat(e,"&startTime=").concat(a)).then((function(e){return e.data}))}(e,b)}})),T=S.data,P=S.isLoading,B=(S.error,function(e){var a={};return e.forEach((function(e){var n="".concat(e.service.name,"_").concat(e.user.firstName,"_").concat(e.user.lastName,"_").concat(e.user.mobileNumber,"_").concat(e.startTime,"_").concat(e.endTime);a[n]?a[n].peopleCount++:a[n]=(0,t.Z)((0,t.Z)({},e),{},{serviceName:e.service.name,userName:"".concat(e.user.firstName," ").concat(e.user.lastName),contact:"string"===typeof e.user.mobileNumber?"--":e.user.mobileNumber,peopleCount:1})})),Object.values(a)});function A(e){return e<10?"0"+e:e}var D=function(){m.Am.error("There is no bookings data available to download.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return(0,p.jsx)(p.Fragment,{children:y&&T&&(console.log(y),(0,p.jsx)("div",{className:"row justify-content-center",children:(0,p.jsxs)("div",{className:"col-12",children:[(0,p.jsxs)("div",{className:"row heading-add",children:[(0,p.jsx)("aside",{className:"col-sm-10 mt-3 mb-3",children:(0,p.jsx)(o.OL,{to:"/Merchants",children:(0,p.jsx)("i",{className:"fe fe-arrow-left-circle fe-24"})})}),(0,p.jsx)("aside",{className:"col-sm-10",children:(0,p.jsx)("h2",{className:"mb-0 page-title",children:"Cikka Profile Details"})})]}),(0,p.jsx)("div",{className:"row my-2",children:(0,p.jsxs)("div",{className:"col-md-6",children:[(0,p.jsx)("div",{className:"card shadow",children:(0,p.jsxs)("div",{className:"card-body",children:[(0,p.jsx)("h5",{className:"card-title",children:"Cikka Balance Details"}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-md-5 mt-1",children:(0,p.jsx)("label",{children:"Purchase Value"})}),(0,p.jsx)("div",{className:"col-md-7 mt-1",children:(0,p.jsx)("label",{children:y.purchaseValue})}),(0,p.jsx)("div",{className:"col-md-5 mt-1",children:(0,p.jsx)("label",{children:"cikka Sender Transaction"})}),(0,p.jsx)("div",{className:"col-md-7 mt-1",children:(0,p.jsx)("label",{children:y.cikkaSenderTransaction})}),(0,p.jsx)("div",{className:"col-md-5 mt-1",children:(0,p.jsx)("label",{children:"Cikka Receiver Transaction"})}),(0,p.jsx)("div",{className:"col-md-7 mt-1",children:(0,p.jsx)("label",{children:y.cikkaReceiverTransaction})}),(0,p.jsx)("div",{className:"col-md-5 mt-1",children:(0,p.jsx)("label",{children:"Cikka Balance"})}),(0,p.jsx)("div",{className:"col-md-7 mt-1",children:(0,p.jsx)("label",{children:y.cikkaBalance.toFixed(2)})})]})]})}),(0,p.jsx)("div",{className:"col-md-6"})]})}),(0,p.jsx)("div",{className:"row my-2 mt-5",children:(0,p.jsx)("div",{className:"col-md-12",children:(0,p.jsx)("div",{className:"card shadow",children:(0,p.jsxs)("div",{className:"card-body",children:[(0,p.jsxs)("ul",{className:"nav nav-tabs mb-3",children:[(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)("button",{className:"nav-link ".concat("cikkaPurchase"===j?"active":""),onClick:function(){return N("cikkaPurchase")},children:"Cikka Purchase"})}),(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)("button",{className:"nav-link ".concat("cikkaTransaction"===j?"active":""),onClick:function(){return N("cikkaTransaction")},children:"Cikka Transaction"})}),(0,p.jsx)("li",{className:"nav-item",children:(0,p.jsx)("button",{className:"nav-link ".concat("appointments"===j?"active":""),onClick:function(){return N("appointments")},children:"Appointments"})})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"row my-2 mt-3",children:(0,p.jsxs)("div",{className:"col-md-12",children:["cikkaPurchase"===j&&(0,p.jsxs)("div",{className:"resp-table cikka-purchase-tb",children:[(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("aside",{className:"col-sm-10",children:(0,p.jsx)("h5",{className:"card-title",children:"Cikka Purchase"})})}),(0,p.jsx)("div",{children:(0,p.jsxs)("table",{className:"table mt-2",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"id"}),(0,p.jsx)("th",{children:"userId"}),(0,p.jsx)("th",{children:"purchaseStatus"}),(0,p.jsx)("th",{children:"purchaseValue"}),(0,p.jsx)("th",{children:"paymentDetails"}),(0,p.jsx)("th",{children:"createdBy"}),(0,p.jsx)("th",{children:"updatedBy"}),(0,p.jsx)("th",{children:"createdAt"}),(0,p.jsx)("th",{children:"updatedAt"}),(0,p.jsx)("th",{children:"status"})]})}),(0,p.jsx)("tbody",{children:C?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{rowSpan:"10",colSpan:"13",children:(0,p.jsx)("div",{className:"text-center py-5",children:(0,p.jsx)(h.Z,{animation:"border"})})})}):y.cikkaPurchase&&y.cikkaPurchase.length>0?(0,p.jsx)(p.Fragment,{children:y.cikkaPurchase.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e.id}),(0,p.jsx)("td",{children:e.userId}),(0,p.jsx)("td",{children:e.purchaseStatus}),(0,p.jsx)("td",{children:e.purchaseValue}),(0,p.jsx)("td",{children:e.paymentDetails}),(0,p.jsx)("td",{children:e.createdBy}),(0,p.jsx)("td",{children:e.updatedBy}),(0,p.jsx)("td",{children:e.createdAt}),(0,p.jsx)("td",{children:e.updatedAt}),(0,p.jsx)("td",{children:e.status})]},e.id)}))}):(0,p.jsx)("tr",{children:(0,p.jsx)("td",{rowSpan:"10",colSpan:"13",children:(0,p.jsx)("div",{className:"text-center py-5",children:(0,p.jsx)("strong",{children:"No purchase were done"})})})})})]})})]}),(0,p.jsx)("div",{className:"col-md-6"})]})}),(0,p.jsx)("div",{children:"cikkaTransaction"===j&&(0,p.jsxs)("div",{className:"resp-table cikka-transaction-tb",children:[(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("aside",{className:"col-sm-10",children:(0,p.jsx)("h5",{className:"card-title",children:"Cikka Transaction"})})}),(0,p.jsx)("div",{children:(0,p.jsxs)("table",{className:"table mt-2",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"id"}),(0,p.jsx)("th",{children:"senderId"}),(0,p.jsx)("th",{children:"receiverId"}),(0,p.jsx)("th",{children:"merchantId"}),(0,p.jsx)("th",{children:"merchant"}),(0,p.jsx)("th",{children:"transactionValue"}),(0,p.jsx)("th",{children:"memberCutValue"}),(0,p.jsx)("th",{children:"merchantCutValue"}),(0,p.jsx)("th",{children:"superAgentCutValue"}),(0,p.jsx)("th",{children:"transactionPercentage"}),(0,p.jsx)("th",{children:"transactionType"}),(0,p.jsx)("th",{children:"transactionStatus"}),(0,p.jsx)("th",{children:"createdBy"}),(0,p.jsx)("th",{children:"updatedBy"}),(0,p.jsx)("th",{children:"createdAt"}),(0,p.jsx)("th",{children:"updatedAt"}),(0,p.jsx)("th",{children:"status"})]})}),(0,p.jsx)("tbody",{children:C?(0,p.jsx)("tr",{children:(0,p.jsx)("td",{rowSpan:"10",colSpan:"4",children:(0,p.jsx)("div",{className:"text-center py-5",children:(0,p.jsx)(h.Z,{animation:"border"})})})}):y.cikkaTransaction&&y.cikkaTransaction.length>0?(0,p.jsx)(p.Fragment,{children:y.cikkaTransaction.map((function(e){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:e.id}),(0,p.jsx)("td",{children:e.senderId}),(0,p.jsx)("td",{children:e.receiverId}),(0,p.jsx)("td",{children:e.merchantId}),(0,p.jsx)("td",{children:e.merchant}),(0,p.jsx)("td",{children:e.transactionValue}),(0,p.jsx)("td",{children:e.memberCutValue}),(0,p.jsx)("td",{children:e.merchantCutValue}),(0,p.jsx)("td",{children:e.superAgentCutValue}),(0,p.jsx)("td",{children:e.transactionPercentage}),(0,p.jsx)("td",{children:e.transactionType}),(0,p.jsx)("td",{children:e.transactionStatus}),(0,p.jsx)("td",{children:e.createdBy}),(0,p.jsx)("td",{children:e.updatedBy}),(0,p.jsx)("td",{children:e.createdAt}),(0,p.jsx)("td",{children:e.updatedAt}),(0,p.jsx)("td",{children:e.status})]},e.id)}))}):(0,p.jsx)("tr",{children:(0,p.jsx)("td",{rowSpan:"10",colSpan:"13",children:(0,p.jsx)("div",{className:"text-center py-5",children:(0,p.jsx)("strong",{children:"No transaction were done"})})})})})]})})]})}),(0,p.jsx)("div",{children:"appointments"===j&&(0,p.jsxs)("div",{className:"resp-table cikka-transaction-tb",children:[(0,p.jsx)("div",{className:"row",children:(0,p.jsx)("aside",{className:"col-sm-10",children:(0,p.jsx)("h5",{className:"card-title",children:"Appointments"})})}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("aside",{className:"col-sm-4 mt-2 mr-2",children:(0,p.jsx)(u(),{selected:new Date(b),onChange:function(e){var a=e.getFullYear(),n=e.getMonth()+1,t=e.getDate();n<10&&(n="0"+n),t<10&&(t="0"+t);var s="".concat(a,"-").concat(n,"-").concat(t);f(s)},className:"form-control",dateFormat:"dd-MM-yyyy",icon:(0,p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48",children:[(0,p.jsx)("mask",{id:"ipSApplication0",children:(0,p.jsxs)("g",{fill:"none",stroke:"#fff",strokeLinejoin:"round",strokeWidth:"4",children:[(0,p.jsx)("path",{strokeLinecap:"round",d:"M40.04 22v20h-32V22"}),(0,p.jsx)("path",{fill:"#fff",d:"M5.842 13.777C4.312 17.737 7.263 22 11.51 22c3.314 0 6.019-2.686 6.019-6a6 6 0 0 0 6 6h1.018a6 6 0 0 0 6-6c0 3.314 2.706 6 6.02 6c4.248 0 7.201-4.265 5.67-8.228L39.234 6H8.845l-3.003 7.777Z"})]})}),(0,p.jsx)("path",{fill:"currentColor",d:"M0 0h48v48H0z",mask:"url(#ipSApplication0)"})]})})}),(0,p.jsx)("aside",{className:"col-sm-2 mt-2  add-sec",children:(0,p.jsx)("button",{className:"bttn",onClick:function(){if(T&&T.data&&T.data.length>0){var e=B(T.data),a=0,n=e.map((function(e){return a+=e.peopleCount,{ServiceName:e.service.name,UserName:"".concat(e.user.firstName," ").concat(e.user.lastName),Contact:"string"===e.contact?"--":e.contact,SpecialRequest:"string"===e.specialRequest?"--":e.specialRequest,PeopleCount:e.peopleCount,StartTime:new Date(e.startTime).toLocaleString("en-GB",{timeZone:"Europe/London"}),EndTime:new Date(e.endTime).toLocaleString("en-GB",{timeZone:"Europe/London"})}})),t={ServiceName:"",UserName:"",Contact:"",SpecialRequest:"Total:",PeopleCount:a,StartTime:"",EndTime:""};n.push(t);var s=x.P6.json_to_sheet(n);s["!cols"]||(s["!cols"]=[]);[{wch:35},{wch:20},{wch:20},{wch:20},{wch:8},{wch:25},{wch:25}].forEach((function(e,a){s["!cols"][a]=e}));var c=x.P6.book_new();x.P6.book_append_sheet(c,s,"bookings");var r=new Date,i="".concat(r.getFullYear()).concat(A(r.getMonth()+1)).concat(A(r.getDate())).concat(A(r.getHours())).concat(A(r.getMinutes())),d="bookings_".concat(i,".xlsx");x.NC(c,d)}else console.error("No appointments data available to download."),D()},children:(0,p.jsx)("i",{className:"fe fe-download fe-16",children:(0,p.jsx)("span",{children:"  Download "})})})})]}),(0,p.jsx)("div",{children:(0,p.jsxs)("table",{className:"table mt-2",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Status"}),(0,p.jsx)("th",{children:"service Name"}),(0,p.jsx)("th",{children:"User Name"}),(0,p.jsx)("th",{children:"Contact"}),(0,p.jsx)("th",{children:"SpecialRequest"}),(0,p.jsx)("th",{children:"# People"}),(0,p.jsx)("th",{children:"StartTime"}),(0,p.jsx)("th",{children:"EndTime"})]})}),(0,p.jsx)("tbody",{children:function(){if(P)return(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"9",children:(0,p.jsx)("div",{className:"text-center py-5",children:(0,p.jsx)(h.Z,{animation:"border"})})})});if(T&&T.data.length>0){var e=B(T.data),a=0,n=e.map((function(e,n){return a+=e.peopleCount,(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:(0,p.jsx)(l.q,{code:e.status})}),(0,p.jsx)("td",{children:e.serviceName}),(0,p.jsx)("td",{children:e.userName}),(0,p.jsx)("td",{children:e.contact}),(0,p.jsx)("td",{children:e.specialRequest}),(0,p.jsx)("td",{children:e.peopleCount}),(0,p.jsx)("td",{children:new Date(e.startTime).toLocaleString("en-GB",{timeZone:"Europe/London"})}),(0,p.jsx)("td",{children:new Date(e.endTime).toLocaleString("en-GB",{timeZone:"Europe/London"})})]},n)}));return n.push((0,p.jsx)("tr",{children:(0,p.jsxs)("td",{children:[(0,p.jsx)("strong",{children:"Total:"}),"\xa0\xa0",a]})},"total")),n}return(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:"9",children:(0,p.jsx)("div",{className:"text-center py-5",children:(0,p.jsx)("strong",{children:"No appointments were done"})})})})}()})]})})]})})]})]})})})})]})}))})}}}]);
//# sourceMappingURL=294.e4e13888.chunk.js.map